(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5404:function(e,s,t){Promise.resolve().then(t.bind(t,6117))},6117:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return a}});var n=t(7437),l=t(2265);function a(){let[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)([]),[r,c]=(0,l.useState)(""),[d,i]=(0,l.useState)(""),[u,o]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null),[m,p]=(0,l.useState)(!0),[f,j]=(0,l.useState)(null);return(0,l.useEffect)(()=>{fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat("1v8kK2LHmFUvd6YbuNIob6Y8hZfEiHgWT8kwErtN6GPE","/values/").concat("База клиентов","?key=").concat("AIzaSyCa5sDs5pYz5OVvZNyRL9u3Rv4IorO-DfU")).then(e=>e.json()).then(e=>{let t=e.values;t&&t.length>0?(a(t[0]),s(t.slice(1))):j("Нет данных на листе."),p(!1)}).catch(e=>{j("Ошибка загрузки данных: "+e.message),p(!1)})},[]),(0,n.jsxs)("div",{className:"p-4 max-w-xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Поиск или создание контакта"}),m&&(0,n.jsx)("p",{children:"Загрузка данных..."}),f&&(0,n.jsx)("p",{className:"text-red-600",children:f}),!m&&!f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[(0,n.jsxs)("select",{className:"p-2 border rounded",onChange:e=>c(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Выбрать колонку"}),t.length>0?t.map(e=>(0,n.jsx)("option",{value:e,children:e},e)):(0,n.jsx)("option",{disabled:!0,children:"Нет доступных колонок"})]}),(0,n.jsx)("input",{className:"p-2 border rounded",placeholder:"Значение для поиска",value:d,onChange:e=>i(e.target.value)}),(0,n.jsx)("button",{className:"p-2 bg-blue-500 text-white rounded",onClick:()=>{if(!r||!d)return;let s=t.indexOf(r);if(-1===s){j("Выбранная колонка не найдена в заголовках.");return}let n=e.find(e=>e[s]===d);n?(x(n[t.indexOf("ID")]),o(!0)):(o(!1),x(null))},children:"Проверить"})]}),d&&(0,n.jsx)("div",{className:"p-4 border rounded mt-4",children:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-green-600",children:"Контакт найден ✅"}),(0,n.jsxs)("p",{className:"text-blue-600",children:["ID: ",h]})," "]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-red-600 mb-2",children:"Контакт не найден ❌"}),(0,n.jsx)("button",{className:"p-2 bg-green-500 text-white rounded",children:"Создать контакт"})]})})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5404)}),_N_E=e.O()}]);